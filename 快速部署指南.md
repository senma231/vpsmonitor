# VPS Monitor 快速部署指南

## 🚀 一键部署到Cloudflare

### 第一步：推送代码到GitHub

```bash
# 1. 初始化Git仓库
git init

# 2. 添加远程仓库（使用你的GitHub用户名）
git remote add origin https://github.com/senma231/vpsmonitor.git

# 3. 添加所有文件
git add .

# 4. 提交代码
git commit -m "Initial commit: VPS Monitor云原生监控系统"

# 5. 推送到GitHub
git push -u origin main
```

### 第二步：获取Cloudflare API Token

1. 登录 [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. 进入 "My Profile" > "API Tokens"
3. 点击 "Create Token" > "Custom token"
4. 设置权限：
   - Account: Cloudflare Workers:Edit
   - Account: Cloudflare Pages:Edit  
   - Account: D1:Edit
   - Zone: Zone:Read, DNS:Edit

### 第三步：配置GitHub Secrets

在GitHub仓库的 Settings > Secrets and variables > Actions 中添加：

```
CLOUDFLARE_API_TOKEN=你的Cloudflare_API_Token
CLOUDFLARE_ACCOUNT_ID=你的Cloudflare账户ID
AUTH_SECRET=随机生成32位字符串
ENCRYPTION_KEY=随机生成32位字符串  
ADMIN_PASSWORD=管理员密码
VITE_API_URL=https://api.你的域名.workers.dev
VITE_WS_URL=wss://api.你的域名.workers.dev/ws
```

### 第四步：预部署设置

运行预部署脚本创建必要资源：

```bash
# 安装Wrangler CLI
npm install -g wrangler

# 登录Cloudflare
wrangler login

# 运行预部署脚本
chmod +x scripts/pre-deploy.sh
./scripts/pre-deploy.sh
```

这会自动创建：
- D1 数据库
- KV 命名空间
- 更新配置文件
- 初始化数据库
- 生成环境变量模板

### 第五步：配置Cloudflare Pages

在 [Cloudflare Dashboard](https://dash.cloudflare.com/) 中：

1. 进入 **Pages** > **Create a project**
2. 选择 **Connect to Git**
3. 选择你的 GitHub 仓库 `senma231/vpsmonitor`
4. 配置构建设置：
   - **Framework preset**: Vue
   - **Build command**: `npm run build`
   - **Build output directory**: `dist`
   - **Root directory**: `/` (留空)

### 第六步：触发Workers部署

推送代码触发Workers自动部署：

```bash
git add .
git commit -m "Deploy to production"
git push origin main
```

**注意**: Pages会通过Git集成自动部署，Workers通过GitHub Actions部署。

## ✅ 部署完成

部署成功后，你将获得：

- **Workers API**: `https://api.你的域名.workers.dev`
- **前端页面**: `https://vps-monitor.pages.dev`

## 🔧 Agent安装

在需要监控的服务器上运行：

```bash
# Linux/macOS一键安装
curl -fsSL https://raw.githubusercontent.com/senma231/vpsmonitor/main/scripts/install-agent.sh | bash
```

## 📞 需要帮助？

- 查看完整文档：`docs/deployment.md`
- 提交问题：[GitHub Issues](https://github.com/senma231/vpsmonitor/issues)

---

**注意**: 这是全新开发的项目，不需要fork原有项目，直接使用即可！
